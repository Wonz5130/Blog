---
title: 判断是否为无损连接分解
tag: [解题套路]
category: 数据库
---

>这个就考前看了一本课外的辅导教材，现学了一下方法，不知道能不能回忆起来。 

<!--more-->

**题目：**U=(A,B,C,D,E)    F={A->D,E->D,D->B,BC->D,DC->A}

判断ρ={AB,AE,CE,BCD,AC} 是否为无损连接分解。

**解：**

先求出候选键为 CE。

然后画一个初始判定表如下图所示。

|      | A    | B    | C    | D    | E    |
| ---- | ---- | ---- | ---- | ---- | ---- |
| AB   | a1   | a2   | b13  | b14  | b15  |
| AE   | a1   | b22  | b23  | b24  | a5   |
| CE   | b31  | b32  | a3   | b34  | a5   |
| BCD  | b41  | a2   | a3   | a4   | b45  |
| AC   | a1   | b52  | a3   | b54  | b55  |

解释一下这张**初始判定表**的含义：

直接看ρ，比如第一个是 AB，那么就在 A 列写 a1，在 B 列写 a2，其余都写 b1j。

然后开始计算。这时候要看 F 中的函数依赖。

比如，第一个是 **A->D**，看 A 列有没有 ai，看到有 a1，再看 D 列中对应的，如果不相同，也有 aj 的话，就把其他换成 aj，如果没有，就以第一个 ai 对应的 bij 为基准，其他都换成 bij。

所以判定表应换成：

|      | A      | B    | C    | D       | E    |
| ---- | ------ | ---- | ---- | ------- | ---- |
| AB   | **a1** | a2   | b13  | **b14** | b15  |
| AE   | **a1** | b22  | b23  | **b14** | a5   |
| CE   | b31    | b32  | a3   | b34     | a5   |
| BCD  | b41    | a2   | a3   | a4      | b45  |
| AC   | **a1** | b52  | a3   | **b14** | b55  |

**接下来看 E->D：**

以前面修改后的表为基准。

|      | A    | B    | C    | D       | E      |
| ---- | ---- | ---- | ---- | ------- | ------ |
| AB   | a1   | a2   | b13  | b14     | b15    |
| AE   | a1   | b22  | b23  | **b14** | **a5** |
| CE   | b31  | b32  | a3   | **b14** | **a5** |
| BCD  | b41  | a2   | a3   | a4      | b45    |
| AC   | a1   | b52  | a3   | b14     | b55    |

**D->B：**

这里看 D 列，因为 b14 对应 B 列有 a2，所以就不以 D 列中 a4 为基准，而是以 b14 为基准，改 B 列对应位置为 a2。

|      | A    | B      | C    | D       | E    |
| ---- | ---- | ------ | ---- | ------- | ---- |
| AB   | a1   | a2     | b13  | b14     | b15  |
| AE   | a1   | **a2** | b23  | **b14** | a5   |
| CE   | b31  | **a2** | a3   | **b14** | a5   |
| BCD  | b41  | a2     | a3   | a4      | b45  |
| AC   | a1   | **a2** | a3   | **b14** | b55  |

**BC->D：**

当左边出现两个元素时，看 B 列和 C 列相同的行，发现是 a2、a3，然后修改 D 列对应位置为 a4。

|      | A    | B      | C      | D      | E    |
| ---- | ---- | ------ | ------ | ------ | ---- |
| AB   | a1   | a2     | b13    | b14    | b15  |
| AE   | a1   | a2     | b23    | b14    | a5   |
| CE   | b31  | **a2** | **a3** | **a4** | a5   |
| BCD  | b41  | **a2** | **a3** | **a4** | b45  |
| AC   | a1   | **a2** | **a3** | **a4** | b55  |

**DC->A：**

D 列和 C 列有相同的行，是 a3、a4，然后修改 A 列对应位置为 a1。

|      | A      | B    | C      | D      | E    |
| ---- | ------ | ---- | ------ | ------ | ---- |
| AB   | a1     | a2   | b13    | b14    | b15  |
| AE   | a1     | a2   | b23    | b14    | a5   |
| CE   | **a1** | a2   | **a3** | **a4** | a5   |
| BCD  | **a1** | a2   | **a3** | **a4** | b45  |
| AC   | **a1** | a2   | **a3** | **a4** | b55  |

**最终表：**

|      | A    | B    | C    | D    | E    |
| ---- | ---- | ---- | ---- | ---- | ---- |
| AB   | a1   | a2   | b13  | b14  | b15  |
| AE   | a1   | a2   | b23  | b14  | a5   |
| CE   | a1   | a2   | a3   | a4   | a5   |
| BCD  | a1   | a2   | a3   | a4   | b45  |
| AC   | a1   | a2   | a3   | a4   | b55  |

再看表中全部为 a 的行，发现是第三行，所以ρ为无损连接分解。

**教材上的例题图片：**

![](40-判断是否为无损连接分解\1.png)

![](40-判断是否为无损连接分解\2.png)

![](40-判断是否为无损连接分解\3.png)

<u>本文于 2018 年 5 月 30 日首发于 [CSDN](https://blog.csdn.net/Wonz5130/article/details/80502746)。</u>